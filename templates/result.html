{% extends "layout.html" %}

{% block title %}Resultado do Diagn√≥stico{% endblock %}

{% block content %}
<section class="panel">
  <h2>ü©∫ Resultado do diagn√≥stico</h2>
  <p class="panel-subtitle">Confira os achados com base nas informa√ß√µes fornecidas e aplique as recomenda√ß√µes sugeridas.</p>

  <div class="result-block">
    <h3>Sintomas selecionados</h3>
    {% if sintomas %}
    <ul class="tag-list">
      {% for s in sintomas %}
      <li>{{ s }}</li>
      {% endfor %}
    </ul>
    {% else %}
    <p class="muted">Nenhum sintoma foi selecionado.</p>
    {% endif %}
  </div>

  {% if descricao_extra %}
  <div class="result-block">
    <h3>Descri√ß√£o adicional</h3>
    <p class="callout">{{ descricao_extra }}</p>
  </div>
  {% endif %}

  <div class="result-block">
    <h3>Poss√≠veis causas e recomenda√ß√µes</h3>
    <div class="card-grid">
      {% for d in diagnosticos %}
      <div class="card">
        <p><strong>Diagn√≥stico:</strong> {{ d.diagnostico }}</p>
        <p><strong>Causa prov√°vel:</strong> {{ d.causa_provavel }}</p>
        <p><strong>Recomenda√ß√£o:</strong> {{ d.recomendacao }}</p>
      </div>
      {% endfor %}
    </div>
  </div>

  <p class="log-status">{{ log_status }}</p>
<p class="back-link"><a href="{{ url_for('index') }}">üîÅ Fazer novo diagn√≥stico</a></p>
</section>

<section class="panel">
  <h2>üìä Resumo do hardware do servidor</h2>
  <ul class="info-list">
    <li><span>Hostname</span><strong>{{ sysinfo.hostname }}</strong></li>
    <li><span>Plataforma</span><strong>{{ sysinfo.platform }} {{ sysinfo.platform_release }} ({{ sysinfo.architecture }})</strong></li>
    <li><span>Processador</span><strong>{{ sysinfo.processor }}</strong></li>
    <li><span>CPUs l√≥gicas</span><strong>{{ sysinfo.cpu_count }}</strong></li>
    <li><span>Uso de CPU</span><strong>{{ sysinfo.cpu_usage_percent }}%</strong></li>
    <li><span>Uso de mem√≥ria</span><strong>{{ sysinfo.memory_usage_percent }}% (Total: {{ sysinfo.total_memory }} bytes)</strong></li>
    <li><span>Boot do sistema</span><strong>{{ sysinfo.boot_time }}</strong></li>
  </ul>
</section>

<section class="panel">
  <h2>üíæ Discos</h2>
  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Dispositivo</th>
          <th>Montagem</th>
          <th>Sistema de arquivos</th>
          <th>Total (bytes)</th>
          <th>Usado (bytes)</th>
          <th>Livre (bytes)</th>
          <th>Uso %</th>
        </tr>
      </thead>
      <tbody>
        {% for d in sysinfo.disks %}
        <tr>
          <td>{{ d.device }}</td>
          <td>{{ d.mountpoint }}</td>
          <td>{{ d.fstype }}</td>
          <td>{{ d.total }}</td>
          <td>{{ d.used }}</td>
          <td>{{ d.free }}</td>
          <td>{{ d.percent }}%</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
